Appcelerator.Widget.If={getName:function(){return"appcelerator if"},getDescription:function(){return"if widget"},getVersion:function(){return"__VERSION__"},getSpecVersion:function(){return 1},getAuthor:function(){return"Hamed Hashemi"},getModuleURL:function(){return"http://www.appcelerator.org"},isWidget:function(){return true},getWidgetName:function(){return"app:if"},getAttributes:function(){return[{name:"expr",optional:false,type:Appcelerator.Types.javascriptExpr,description:"The javascript expression to execute"},{name:"position",optional:true,type:Appcelerator.Types.number,description:"defaults to Appcelerator.Compiler.POSITION_REMOVE"},{name:"deleteelse",optional:true,type:Appcelerator.Types.bool,description:"whether or not to delete if fails if condition"},{name:"parent_tag",optional:true,type:Appcelerator.Types.identifier,description:"defaults to Appcelerator.Compiler.POSITION_REMOVE"}]},getChildNodes:function(){return[{name:"else",optional:true,maxNumber:1},{name:"elseif",optional:true,attributes:[{name:"expr",optional:false,type:Appcelerator.Types.javascriptExpr}]}]},compileWidget:function(params){var id=params.id;if(eval(Appcelerator.Widget.If.generateConditional(params.ifcond["cond"]))){$(id).innerHTML=params.ifcond["code"];Appcelerator.Compiler.dynamicCompile($(id))}else{if(""+params.deleteelse=="true"){Logger.info("removing "+id);Element.remove($(id))}for(var c=0;c<params.elseifconds.length;c++){var condition=params.elseifconds[c];if(eval(Appcelerator.Widget.If.generateConditional(condition.cond))){$(id).innerHTML=condition.code;Appcelerator.Compiler.dynamicCompile($(id));return }}var elsecond=params.elsecond;if(elsecond){$(id).innerHTML=elsecond.code;Appcelerator.Compiler.dynamicCompile($(id))}}},uniqueFunctionId:0,generateConditional:function(A){Appcelerator.Widget.If.uniqueFunctionId++;var B="app_if_function_"+Appcelerator.Widget.If.uniqueFunctionId;var A="var "+B+" = function () { if ("+A+")";A+="{ return true; }";A+="else { return false; }};";A+=B+"();";return A},buildWidget:function(E,C){var A={code:"",cond:C.expr};var D=[];var I;if(Appcelerator.Browser.isIE){var H=E.innerHTML;if(H.indexOf("<ELSEIF")>0){H=H.replace(/<ELSEIF/g,"<APP:ELSEIF").replace(/\/ELSEIF>/g,"/APP:ELSEIF>")}if(H.indexOf("<ELSE")>0){H=H.replace(/<ELSE/g,"<APP:ELSE").replace(/\/ELSE>/g,"/APP:ELSE>")}if(H.indexOf("<APP:ELSE")>0){E.innerHTML=H}}if(Appcelerator.Browser.isOpera){var H=E.innerHTML;H=H.replace(/<ELSEIF/gi,"<ELSEIF").replace(/\/ELSEIF>/gi,"/ELSEIF>");H=H.replace(/<ELSE/gi,"<ELSE").replace(/\/ELSE>/gi,"/ELSE>");E.innerHTML=H}for(var G=0;G<E.childNodes.length;G++){(function(){var L,J;var K=E.childNodes[G];if(K.nodeType==1&&K.nodeName=="ELSEIF"){if(I){throw ("syntax error: elseif after an else detected.")}D.push({code:Appcelerator.Compiler.getHtml(K),cond:K.getAttribute("expr")})}else{if(K.nodeType==1&&K.nodeName=="ELSE"){if(I){throw ("syntax error: more than one else statement detected.")}I={code:Appcelerator.Compiler.getHtml(K)}}else{if(K.nodeType==1){if(I||D.length>0){throw ("syntax error: html code after an else or elseif detected.")}A.code+=Appcelerator.Compiler.convertHtml(Appcelerator.Util.Dom.toXML(K,true),true)}else{if(K.nodeType==3){var M=K.nodeValue.trim();if((I||D.length>0)&&M.length>0){throw ("Html code after an else or elseif detected.")}A.code+=M}}}}})()}C.ifcond=A;C.elseifconds=D;C.elsecond=I;var F=C.position||Appcelerator.Compiler.POSITION_REPLACE;var B=C.parent_tag||"div";return{presentation:"",position:F,compile:true,parent_tag:B}}};Appcelerator.Widget.register("app:if",Appcelerator.Widget.If);