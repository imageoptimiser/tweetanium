Appcelerator.Widget.Content={getName:function(){return"appcelerator content"},getDescription:function(){return"content widget support modularizing of code by breaking them into separate files which can be loaded either at load time or dynamically based on a message"},getVersion:function(){return"__VERSION__"},getSpecVersion:function(){return 1},getAuthor:function(){return"Jeff Haynie"},getModuleURL:function(){return"http://www.appcelerator.org"},isWidget:function(){return true},getWidgetName:function(){return"app:content"},getActions:function(){return["execute","show"]},getAttributes:function(){var A=Appcelerator.Types;return[{name:"on",optional:true,type:A.onExpr,description:"May be used to execute/load the content."},{name:"src",optional:true,type:A.pathOrUrl,description:"The source for the content file to load."},{name:"args",optional:true,type:A.json,description:"Used to replace text in the content file."},{name:"lazy",optional:true,defaultValue:"false",type:A.bool,description:"Indicates whether the content file should be lazy loaded."},{name:"onload",optional:true,type:A.messageSend,description:"Fire this message when content file is loaded."},{name:"onfetch",optional:true,type:A.messageSend,description:"Fire this message when content file is fetched but before being loaded."},{name:"property",optional:true,type:A.messageSend,description:"The name of the property in the message payload to be used for the src"},{name:"useframe",optional:true,defaultValue:"true",type:A.bool,description:"Use a hidden iframe when fetching the content, instead of an Ajax request. This is normally not required."}]},execute:function(D,A,C,B){if(A.property&&C[A.property]){A.src=C[A.property]}Appcelerator.Widget.Content.fetch(D,A.src,A.args,A.onload,A.onfetch,A.useframe)},show:function(E,A,D,C){var B=$(E);if(Object.isUndefined(B._executed)){this.execute(E,A,D,C)}Element.show(B)},compileWidget:function(A){if(!(A.lazy=="true")&&A.src){Appcelerator.Widget.Content.fetch(A.id,A.src,A.args,A.onload,A.onfetch,A.useframe)}},buildWidget:function(A,B,C){return{position:Appcelerator.Compiler.POSITION_REPLACE,presentation:"",compile:true}},unload:function(A){var B=$(A).firstChild;if(B&&B.nodeType==1){Appcelerator.Compiler.destroy(B)}},fetch:function(F,G,D,E,A,C){G=Appcelerator.URI.absolutizeURI(G,Appcelerator.DocumentPath);$D("fetching "+G+" to target="+F);F=$(F);F.style.visibility="hidden";var B=this;if(C!="true"){new Ajax.Request(G,{asynchronous:true,method:"get",onSuccess:function(M){if(F._executed){B.unload(F)}F._executed=true;if(A){$MQ(A,{src:G,args:D})}var K=F.getAttribute("scope")||F.scope;var L=Appcelerator.Compiler.createCompilerState();F.state=L;var J=M.responseText.stripScripts();var H=/<body[^>]*>([\s\S]*)?<\/body>/mg.exec(J);if(H){J=H[1]}J=Appcelerator.Compiler.addIENameSpace("<div>"+J+"</div>");if(D){var I=Appcelerator.Compiler.compileTemplate(J);J=I(D.evalJSON())}F.innerHTML=J;L.onafterfinish=function(){F.style.visibility="visible";if(E){$MQ(E,{src:G,args:D})}};M.responseText.evalScripts();Appcelerator.Compiler.compileElement(F.firstChild,L);L.scanned=true;Appcelerator.Compiler.checkLoadState(F)}})}else{Appcelerator.Util.IFrame.fetch(G,function(M){if(F._executed){B.unload(F)}F._executed=true;if(A){$MQ(A,{src:G,args:D})}var J=F.getAttribute("scope")||F.scope;M.setAttribute("scope",J);M.scope=J;Appcelerator.Compiler.getAndEnsureId(M);var K=M.innerHTML;var L=Appcelerator.Compiler.createCompilerState();F.state=L;var I="<div>"+K.stripScripts()+"</div>";if(D){var H=Appcelerator.Compiler.compileTemplate(I);I=H(D.evalJSON())}F.innerHTML=I;L.onafterfinish=function(){F.style.visibility="visible";if(E){$MQ(E,{src:G,args:D})}};K.evalScripts();Appcelerator.Compiler.compileElement(F.firstChild,L);L.scanned=true;Appcelerator.Compiler.checkLoadState(F)},true,true)}}};Appcelerator.Widget.register("app:content",Appcelerator.Widget.Content);