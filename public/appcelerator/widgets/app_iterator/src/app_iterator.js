Appcelerator.Widget.Iterator={getName:function(){return"appcelerator iterator"},getDescription:function(){return"iterator widget"},getVersion:function(){return"__VERSION__"},getSpecVersion:function(){return 1},getAuthor:function(){return"Jeff Haynie"},getModuleURL:function(){return"http://www.appcelerator.org"},isWidget:function(){return true},getWidgetName:function(){return"app:iterator"},getAttributes:function(){var A=Appcelerator.Types;return[{name:"on",optional:true,type:A.onExpr,description:"Used to execute the iterator"},{name:"items",optional:true,type:A.json,description:"Literal (or template-replaced) JSON array to iterate over"},{name:"property",optional:true,type:A.identifier},{name:"rowEvenClassName",optional:true,type:A.cssClass},{name:"rowOddClassName",optional:true,type:A.cssClass},{name:"table",optional:true,defaultValue:"false",type:A.bool},{name:"width",optional:true,defaultValue:"100%",type:A.cssDimension},{name:"headers",optional:true,defaultValue:",",type:A.commaSeparated},{name:"headerids",optional:true,defaultValue:",",type:A.commaSeparated},{name:"headerstyles",optional:true,defaultValue:",",type:A.commaSeparated},{name:"rowOn",optional:true,defaultValue:"",type:A.identifier},{name:"cellspacing",optional:true,defaultValue:"0",type:A.cssDimension},{name:"selectable",optional:true,type:A.bool}]},getActions:function(){return["execute"]},execute:function(id,parameterMap,data,scope){var compiled=parameterMap.compiled;var propertyName=parameterMap.property;var items=parameterMap.items;var table=parameterMap.table;var width=parameterMap.width;var headers=parameterMap.headers;var headerids=parameterMap.headerids;if(headerids&&headerids!=""){headerids=headerids.split(",")}var headerstyles=parameterMap.headerstyles;if(headerstyles&&headerstyles!=""){headerstyles=headerstyles.split(",")}var selectable=parameterMap.selectable;var array=null;if(!compiled){compiled=eval(parameterMap.template+"; init_"+id);parameterMap.compiled=compiled}if(items){data=items.evalJSON()||[]}if(propertyName){array=Object.getNestedProperty(data,propertyName)||[]}else{array=data}var html="";if(!array){html=compiled(data)}else{if(table){var i=0;html+='<table width="'+width+'" cellspacing="'+parameterMap.cellspacing+'"><tr>';headers.each(function(h){var id="";var style="";if(headerids){id=' id="'+headerids[i]+'"'}if(headerstyles){style=' style="'+headerstyles[i]+'"'}html+="<th"+style+id+">"+h+"</th>";i++});html+="</tr>"}if(array.length!=0&&array[0]==undefined){array=[array]}for(var c=0,len=array.length;c<len;c++){var o=array[c];if(typeof o!="object"){o={iterator_value:o}}o.iterator_index=c;o.iterator_length=len;o.iterator_odd_even=(c%2==0)?"even":"odd";if(table){if(o.iterator_odd_even=="odd"){o.iterator_row_class=parameterMap.rowOddClassName}else{o.iterator_row_class=parameterMap.rowEvenClassName}}for(var idx in o){if(typeof o[idx]=="string"){o[idx]=o[idx].replace(/'/,"\u2019")}}html+=compiled(o)}if(table){html+="</table>"}}var element=$(id);if(selectable){element.setAttribute("selectable",selectable)}Appcelerator.Compiler.destroyContent(element);element.innerHTML=Appcelerator.Compiler.addIENameSpace(html);Appcelerator.Compiler.dynamicCompile(element)},compileWidget:function(A){this.execute(A.id,A,null,"")},buildWidget:function(B,C){C.table=C.table=="true";if(C.table){C.headers=C.headers.split(",")}var A=Appcelerator.Compiler.getHtml(B);if(C.rowOn!=""){C.rowOn='on="'+C.rowOn+'"'}if(C.table){A="<tr "+C.rowOn+' class="#{iterator_row_class}">'+A+"</tr>"}C.template=Appcelerator.Compiler.compileTemplate(A,true,"init_"+B.id);var D=!!(!C.on&&C.items);return{presentation:"",position:Appcelerator.Compiler.POSITION_REPLACE,parameters:C,wire:true,compile:D}}};Appcelerator.Widget.register("app:iterator",Appcelerator.Widget.Iterator);