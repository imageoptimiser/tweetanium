Appcelerator.UI.registerUIComponent("behavior","modal",{getAttributes:function(){var A=Appcelerator.Types;return[{name:"modal-background-color",optional:true,description:"background color for modal",defaultValue:"#222"},{name:"opacity",optional:true,description:"opacity for modal background",defaultValue:0.6}]},hide:function(H,D,F,C,A,B,G,E){this._hideModal(H);Appcelerator.Compiler.fireCustomCondition(H,"hide",{id:H})},show:function(H,D,F,C,A,B,G,E){window.scrollTo(0,0);Element.show($(H+"_modal_container"));Element.show($(H+"_modal_dialog"));Element.show($(H));if(Appcelerator.Browser.isIE){document.documentElement.style.overflow="hidden"}else{if(!Appcelerator.Browser.isSafari){document.body.style.overflow="hidden"}}Appcelerator.Compiler.fireCustomCondition(H,"show",{id:H})},_hideModal:function(A){Element.hide($(A+"_modal_container"));Element.hide($(A+"_modal_dialog"));Element.hide($(A));if(Appcelerator.Browser.isIE){document.documentElement.style.overflow="auto"}else{if(!Appcelerator.Browser.isSafari){document.body.style.overflow="auto"}}},getActions:function(){return["hide","show"]},build:function(E,J){var H=E.getAttribute("on");var A=(Appcelerator.Browser.isIE)?document.documentElement.clientHeight:window.outerHeight;var D=(Appcelerator.Browser.isIE)?document.documentElement.clientWidth:window.innerWidth;var C=(Appcelerator.Browser.isIE6)?D+"px":"100%";var G=Element.getStyle(E,"height");var F=document.createElement("div");F.id=E.id+"_modal_container";F.className="behavior modal";F.style.display="none";F.style.position="absolute";F.style.top="0px";F.style.left="0px";F.style.zIndex="2000";F.style.width=C;F.style.height="1200px";F.style.backgroundColor=J["modal-background-color"];F.style.opacity=J.opacity;F.style.filter="alpha( opacity = "+J.opacity*100+")";var B=document.createElement("div");B.id=E.id+"_modal_dialog";B.style.position="absolute";B.style.zIndex="2001";B.style.top="100px";B.style.width="95%";B.style.display="none";B.setAttribute("align","center");new Insertion.Bottom(document.body,B);new Insertion.Bottom(document.body,F);if(H){F.setAttribute("on",H);B.setAttribute("on",H);Appcelerator.Compiler.dynamicCompile(F);Appcelerator.Compiler.dynamicCompile(B)}if($(E.id+"_shadow")){B.appendChild($(E.id+"_shadow"))}else{B.appendChild(E)}var I=this;Appcelerator.UI.addElementUIDependency(E,"behavior","modal","control","panel",function(K){Appcelerator.Compiler.registerConditionListener(K,"hide",function(L,M){I._hideModal(K.id)})})}});